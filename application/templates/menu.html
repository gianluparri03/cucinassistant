{% extends "base.html" %}

{% set title = "Menu" %}

{% block imports %}
    <script>
        function edit() {
            $('textarea').attr('disabled', false);
            $('.non-editing').remove();
            $('.editing').css('display', 'inline');
        }

        window.onload = function() {
            for (ta of $('textarea')) {
                ta.style.height = (ta.scrollHeight + 10) + 'px';
            }
        }
    </script>
{% endblock %}

{% block content %}
    <form method="POST" autocomplete="off">
        <div class="menu-entry">
            <b>Lunedi</b>
            <textarea disabled name="item-0">{{ menu[0] }}</textarea>
            <textarea disabled name="item-1">{{ menu[1] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Martedi</b>
            <textarea disabled name="item-2">{{ menu[2] }}</textarea>
            <textarea disabled name="item-3">{{ menu[3] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Mercoledi</b>
            <textarea disabled name="item-4">{{ menu[4] }}</textarea>
            <textarea disabled name="item-5">{{ menu[5] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Giovedi</b>
            <textarea disabled name="item-6">{{ menu[6] }}</textarea>
            <textarea disabled name="item-7">{{ menu[7] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Venerdi</b>
            <textarea disabled name="item-8">{{ menu[8] }}</textarea>
            <textarea disabled name="item-9">{{ menu[9] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Sabato</b>
            <textarea disabled name="item-10">{{ menu[10] }}</textarea>
            <textarea disabled name="item-11">{{ menu[11] }}</textarea>
        </div>

        <div class="menu-entry">
            <b>Domenica</b>
            <textarea disabled name="item-12">{{ menu[12] }}</textarea>
            <textarea disabled name="item-13">{{ menu[13] }}</textarea>
        </div>

        <div>
            <button class="non-editing" onclick="edit()" type="button">Modifica</button>

            <button class="editing" onclick="if (confirm('Sei sicuro di voler annullare le modifiche?')) location.reload();" type="button">Annulla</button>
            <button class="editing" onclick="if (confirm('Sei sicuro di voler cancellare tutto?')) $('textarea').val('');" type="button">Svuota tutto</button>
            <button class="editing">Salva</button>
        </div>
    </form>
{% endblock %}
