{% extends "base.html" %}

{% set title = "Menu" %}

{% block imports %}
    <script>
        window.onload = function() {
            for (ta of $('textarea')) {
                ta.style.height = (ta.scrollHeight + 10) + 'px';
            }
        }
    </script>
{% endblock %}

{% block content %}
    {% set menu = get_menu() %}

    <form method="POST" autocomplete="off">
        <div>
            <b>Lunedi</b>
            <textarea {{ 'disabled' if not edit }} name="item-0">{{ menu[0] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-1">{{ menu[1] }}</textarea>
        </div>

        <div>
            <b>Martedi</b>
            <textarea {{ 'disabled' if not edit }} name="item-2">{{ menu[2] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-3">{{ menu[3] }}</textarea>
        </div>

        <div>
            <b>Mercoledi</b>
            <textarea {{ 'disabled' if not edit }} name="item-4">{{ menu[4] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-5">{{ menu[5] }}</textarea>
        </div>

        <div>
            <b>Giovedi</b>
            <textarea {{ 'disabled' if not edit }} name="item-6">{{ menu[6] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-7">{{ menu[7] }}</textarea>
        </div>

        <div>
            <b>Venerdi</b>
            <textarea {{ 'disabled' if not edit }} name="item-8">{{ menu[8] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-9">{{ menu[9] }}</textarea>
        </div>

        <div>
            <b>Sabato</b>
            <textarea {{ 'disabled' if not edit }} name="item-10">{{ menu[10] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-11">{{ menu[11] }}</textarea>
        </div>

        <div>
            <b>Domenica</b>
            <textarea {{ 'disabled' if not edit }} name="item-12">{{ menu[12] }}</textarea>
            <textarea {{ 'disabled' if not edit }} name="item-13">{{ menu[13] }}</textarea>
        </div>

        <div>
            {% if not edit %}
                <button class="icon" onclick="location.href='?modifica';" type="button"><i class="fas fa-edit"></i></button>
            {% else %}
                <button class="icon" onclick="if (confirm('Sei sicuro di voler annullare le modifiche?')) location.href = '.';" type="button"><i class="fas fa-undo"></i></button>
                <button class="icon" onclick="if (confirm('Sei sicuro di voler cancellare tutto?')) $('textarea').val('');" type="button"><i class="fas fa-trash-alt"></i></button>
                <button class="icon" onclick="return confirm('Sei sicuro di voler sovrascrivere il menu precedente?');"><i class="fas fa-check"></i></button>
            {% endif %}
        </div>
    </form>
{% endblock %}
